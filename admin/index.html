<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>inverted.exe - Admin Panel</title>
  
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/remixicon@4.0.0/fonts/remixicon.css" rel="stylesheet">
  
  <link rel="stylesheet" href="admin.css">

</head>
<body>
  <div class="admin-container">
    <!-- Sidebar -->
    <aside class="admin-sidebar">
      <div class="admin-logo">
        <div class="logo-section">
          <i class="ri-dashboard-line"></i>
          <div class="logo-text">
            <h2>inverted</h2>
            <p>admin panel</p>
          </div>
        </div>
      </div>
      
      <nav class="admin-nav">
        <a href="#dashboard" class="admin-nav-link active" data-section="dashboard">
          <i class="ri-dashboard-line"></i> <span class="nav-text">dashboard</span>
        </a>
        <a href="#inventory" class="admin-nav-link" data-section="inventory">
          <i class="ri-stock-line"></i> <span class="nav-text">inventory</span>
        </a>
        <a href="#categories" class="admin-nav-link" data-section="categories">
          <i class="ri-folder-line"></i> <span class="nav-text">categories</span>
        </a>
        <a href="#shop" class="admin-nav-link" data-section="shop">
          <i class="ri-shopping-bag-line"></i> <span class="nav-text">shop</span>
        </a>
        <a href="#archive" class="admin-nav-link" data-section="archive">
          <i class="ri-archive-drawer-line"></i> <span class="nav-text">archive</span>
        </a>
        <a href="#gallery" class="admin-nav-link" data-section="gallery">
          <i class="ri-gallery-line"></i> <span class="nav-text">gallery</span>
        </a>
      </nav>

      <div class="admin-footer">
        <button class="btn-logout" onclick="logout()">
          <i class="ri-logout-box-line"></i> <span class="nav-text">Logout</span>
        </button>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="admin-main">
      <!-- Content Header with Burger -->
      <div class="admin-content-header">
        <button class="admin-burger" aria-label="toggle sidebar" id="adminBurger">
          <i class="ri-menu-line"></i>
        </button>
      </div>

      <div class="admin-content">
        <!-- DASHBOARD Section -->
        <section id="dashboard" class="admin-section active">
          <div class="section-header">
            <h2>dashboard</h2>
          </div>

          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-icon"><i class="ri-shopping-bag-line"></i></div>
              <div class="stat-info">
                <div class="stat-label">total products</div>
                <div class="stat-value" id="totalProducts">0</div>
              </div>
            </div>

            <div class="stat-card">
              <div class="stat-icon"><i class="ri-archive-drawer-line"></i></div>
              <div class="stat-info">
                <div class="stat-label">archived items</div>
                <div class="stat-value" id="totalArchived">0</div>
              </div>
            </div>

            <div class="stat-card">
              <div class="stat-icon"><i class="ri-gallery-line"></i></div>
              <div class="stat-info">
                <div class="stat-label">gallery images</div>
                <div class="stat-value" id="totalGallery">0</div>
              </div>
            </div>

            <div class="stat-card">
              <div class="stat-icon"><i class="ri-image-add-line"></i></div>
              <div class="stat-info">
                <div class="stat-label">total images</div>
                <div class="stat-value" id="totalImages">0</div>
              </div>
            </div>
          </div>

          <div class="activity-section">
            <h3>recent activity</h3>
            <div id="activityTimeline" class="activity-timeline">
              <p class="empty-state">no recent activity yet</p>
            </div>
          </div>
        </section>

        <!-- INVENTORY Section -->
        <section id="inventory" class="admin-section">
          <div class="section-header">
            <h2>inventory management</h2>
          </div>

          <!-- Low Stock Warning -->
          <div id="lowStockWarning" style="display: none;">
            <div class="alert alert-warning">
              <i class="ri-alert-line"></i>
              <span id="lowStockCount">0</span> items with low stock
            </div>
          </div>

          <!-- Inventory Stats Cards -->
          <div class="inventory-stats">
            <div class="stat-item">
              <div class="stat-number" id="totalInventoryItems">0</div>
              <div class="stat-label">Total Items</div>
              <div class="stat-icon"><i class="ri-box-3-line"></i></div>
            </div>
            <div class="stat-item in-stock">
              <div class="stat-number" id="inStockItems">0</div>
              <div class="stat-label">In Stock</div>
              <div class="stat-icon"><i class="ri-check-line"></i></div>
            </div>
            <div class="stat-item low-stock">
              <div class="stat-number" id="lowStockItems">0</div>
              <div class="stat-label">Low Stock</div>
              <div class="stat-icon"><i class="ri-alert-line"></i></div>
            </div>
            <div class="stat-item out-of-stock">
              <div class="stat-number" id="outOfStockItems">0</div>
              <div class="stat-label">Out of Stock</div>
              <div class="stat-icon"><i class="ri-close-line"></i></div>
            </div>
          </div>

          <!-- Inventory Filter Bar -->
          <div class="inventory-filter-bar">
            <div class="filter-wrapper">
              <div class="filter-group">
                <label for="inventorySearch">Search Items</label>
                <div class="search-input">
                  <i class="ri-search-line"></i>
                  <input type="text" id="inventorySearch" placeholder="Search by name or size..." onkeyup="filterInventory()">
                </div>
              </div>

              <div class="filter-group">
                <label for="inventoryStatus">Filter by Status</label>
                <select id="inventoryStatus" onchange="filterInventory()">
                  <option value="">All Status</option>
                  <option value="in-stock">In Stock</option>
                  <option value="low-stock">Low Stock</option>
                  <option value="out-of-stock">Out of Stock</option>
                </select>
              </div>

              <button class="btn btn-secondary" onclick="resetInventoryFilter()">
                <i class="ri-refresh-line"></i> Reset
              </button>
            </div>
          </div>

          <!-- Inventory Table/Cards Container -->
          <div id="inventoryContainer" class="inventory-display">
            <div id="inventoryTable" class="inventory-grid">
              <p class="empty-state">No items in inventory yet</p>
            </div>
          </div>
        </section>

        <!-- CATEGORIES Section -->
        <section id="categories" class="admin-section">
          <div class="section-header">
            <h2>categories & tags</h2>
            <button class="btn btn-primary" onclick="showCategoryForm()">
              <i class="ri-add-line"></i> add category
            </button>
          </div>

          <!-- Add Category Form -->
          <div class="form-group">
            <label>add new category</label>
            <form class="admin-form" id="categoryForm" onsubmit="handleAddCategory(event)">
              <div class="form-row">
                <input type="text" id="categoryName" placeholder="Category Name" class="form-input" required>
                <input type="text" id="categoryColor" placeholder="Color (hex)" class="form-input" value="#6366f1">
              </div>
              <textarea id="categoryDesc" placeholder="Category Description" class="form-textarea"></textarea>
              <button type="submit" class="btn btn-success">save category</button>
              <button type="button" class="btn btn-secondary" onclick="resetCategoryForm()">cancel</button>
            </form>
          </div>

          <!-- Categories List -->
          <div class="items-list">
            <h3>all categories</h3>
            <div id="categoriesList" class="categories-grid">
              <p class="empty-state">no categories yet. create your first category!</p>
            </div>
          </div>
        </section>

        <!-- SHOP Section -->
        <section id="shop" class="admin-section">
          <div class="section-header">
            <h2>shop products</h2>
            <button class="btn btn-primary" onclick="addNewItem('shop')">
              <i class="ri-add-line"></i> Add Product
            </button>
          </div>

          <!-- Add Product Form -->
          <div class="form-group">
            <label>add new product</label>
            <form class="admin-form" id="shopForm" onsubmit="handleSubmit(event, 'shop')">
              <div class="form-row">
                <input type="text" name="productName" placeholder="Product Name" class="form-input" required>
                <input type="number" name="price" placeholder="Price" class="form-input" required>
              </div>
              <div class="form-row">
                <select name="category" class="form-input">
                  <option value="">select category</option>
                  <option value="uncategorized">uncategorized</option>
                </select>
                <input type="text" name="tags" placeholder="Tags (comma-separated)" class="form-input">
              </div>
              <textarea name="description" placeholder="Product Description" class="form-textarea" required></textarea>

              <!-- Stock Per Size -->
              <div id="stockBySizeForm" style="margin: 24px 0; padding: 20px; background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(255, 255, 255, 0.08); border-radius: 4px;">
                <label style="display: block; margin-bottom: 16px; font-size: 13px; font-weight: 600; text-transform: lowercase; letter-spacing: 0.05em; color: #fff;">stock by size</label>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(70px, 1fr)); gap: 12px; width: 100%;">
                  <div style="display: flex; flex-direction: column; gap: 6px;">
                    <label style="margin: 0; font-weight: 600; font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; color: rgba(255, 255, 255, 0.7); text-align: center;">XS</label>
                    <input type="number" name="stockXS" placeholder="0" value="0" min="0" style="width: 100%; padding: 8px 6px; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.15); color: #fff; border-radius: 4px; box-sizing: border-box; font-size: 14px; font-weight: 500; font-family: Poppins, sans-serif; text-align: center;">
                  </div>
                  <div style="display: flex; flex-direction: column; gap: 6px;">
                    <label style="margin: 0; font-weight: 600; font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; color: rgba(255, 255, 255, 0.7); text-align: center;">S</label>
                    <input type="number" name="stockS" placeholder="0" value="0" min="0" style="width: 100%; padding: 8px 6px; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.15); color: #fff; border-radius: 4px; box-sizing: border-box; font-size: 14px; font-weight: 500; font-family: Poppins, sans-serif; text-align: center;">
                  </div>
                  <div style="display: flex; flex-direction: column; gap: 6px;">
                    <label style="margin: 0; font-weight: 600; font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; color: rgba(255, 255, 255, 0.7); text-align: center;">M</label>
                    <input type="number" name="stockM" placeholder="0" value="0" min="0" style="width: 100%; padding: 8px 6px; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.15); color: #fff; border-radius: 4px; box-sizing: border-box; font-size: 14px; font-weight: 500; font-family: Poppins, sans-serif; text-align: center;">
                  </div>
                  <div style="display: flex; flex-direction: column; gap: 6px;">
                    <label style="margin: 0; font-weight: 600; font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; color: rgba(255, 255, 255, 0.7); text-align: center;">L</label>
                    <input type="number" name="stockL" placeholder="0" value="0" min="0" style="width: 100%; padding: 8px 6px; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.15); color: #fff; border-radius: 4px; box-sizing: border-box; font-size: 14px; font-weight: 500; font-family: Poppins, sans-serif; text-align: center;">
                  </div>
                  <div style="display: flex; flex-direction: column; gap: 6px;">
                    <label style="margin: 0; font-weight: 600; font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; color: rgba(255, 255, 255, 0.7); text-align: center;">XL</label>
                    <input type="number" name="stockXL" placeholder="0" value="0" min="0" style="width: 100%; padding: 8px 6px; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.15); color: #fff; border-radius: 4px; box-sizing: border-box; font-size: 14px; font-weight: 500; font-family: Poppins, sans-serif; text-align: center;">
                  </div>
                  <div style="display: flex; flex-direction: column; gap: 6px;">
                    <label style="margin: 0; font-weight: 600; font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; color: rgba(255, 255, 255, 0.7); text-align: center;">XXL</label>
                    <input type="number" name="stockXXL" placeholder="0" value="0" min="0" style="width: 100%; padding: 8px 6px; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.15); color: #fff; border-radius: 4px; box-sizing: border-box; font-size: 14px; font-weight: 500; font-family: Poppins, sans-serif; text-align: center;">
                  </div>
                </div>
              </div>
              
              <div class="file-input-wrapper">
                <label>product images (multiple)</label>
                <input type="file" accept="image/*" multiple class="form-file" id="shopImages" required>
                <small>upload 1+ images. first image will be shown in grid, others in preview</small>
              </div>

              <button type="submit" class="btn btn-success">save product</button>
            </form>
          </div>

          <!-- Shop Filter & Control Bar -->
          <div class="shop-control-bar">
            <div class="shop-controls">
              <div class="filter-group">
                <label for="shopSearch">Search</label>
                <div class="search-input">
                  <i class="ri-search-line"></i>
                  <input type="text" id="shopSearch" placeholder="Find products..." onkeyup="filterShopItems()">
                </div>
              </div>

              <div class="filter-group">
                <label for="shopCategory">Category</label>
                <select id="shopCategory" onchange="filterShopItems()">
                  <option value="">All Categories</option>
                  <option value="uncategorized">Uncategorized</option>
                </select>
              </div>

              <div class="filter-group">
                <label for="shopSortBy">Sort By</label>
                <select id="shopSortBy" onchange="filterShopItems()">
                  <option value="date-desc">Newest First</option>
                  <option value="date-asc">Oldest First</option>
                  <option value="name-asc">Name (A-Z)</option>
                  <option value="name-desc">Name (Z-A)</option>
                  <option value="price-asc">Price (Low to High)</option>
                  <option value="price-desc">Price (High to Low)</option>
                </select>
              </div>

              <button class="btn btn-secondary" onclick="resetShopFilters()">
                <i class="ri-refresh-line"></i> Reset
              </button>
            </div>

            <!-- Bulk Actions Bar -->
            <div class="bulk-actions-bar" id="bulkActionsBar" style="display: none;">
              <div class="bulk-info">
                <span id="bulkSelectedCount">0</span> items selected
              </div>
              <div class="bulk-buttons">
                <button class="btn btn-secondary" onclick="bulkSelectAll()">Select All</button>
                <button class="btn btn-secondary" onclick="bulkClearSelection()">Clear</button>
                <button class="btn btn-warning" onclick="bulkArchiveItems()">Archive</button>
                <button class="btn btn-danger" onclick="bulkDeleteItems()">Delete</button>
              </div>
            </div>
          </div>

          <!-- Shop Products Grid -->
          <div class="shop-container">
            <div id="shopItems" class="shop-grid">
              <p class="empty-state">No products yet. Add your first product!</p>
            </div>
          </div>
        </section>

        <!-- ARCHIVE Section -->
        <section id="archive" class="admin-section">
          <div class="section-header">
            <h2>archived items</h2>
          </div>

          <div class="items-list">
            <h3>archived items</h3>
            <div id="archiveItems" class="items-grid">
              <p class="empty-state">no archived items yet.</p>
            </div>
          </div>
        </section>

        <!-- GALLERY Section -->
        <section id="gallery" class="admin-section">
          <div class="section-header">
            <h2>gallery images</h2>
            <button class="btn btn-primary" onclick="addNewItem('gallery')">
              <i class="ri-add-line"></i> add image
            </button>
          </div>

          <div class="form-group">
            <label>upload gallery images</label>
            <form class="admin-form" id="galleryForm" onsubmit="handleSubmit(event, 'gallery')">
              <div class="file-input-wrapper">
                <label>select images (multiple)</label>
                <input type="file" accept="image/*" multiple class="form-file" required>
                <small>upload 1+ images</small>
              </div>

              <button type="submit" class="btn btn-success">upload images</button>
            </form>
          </div>

          <div class="items-list">
            <h3>gallery images</h3>
            <div id="galleryItems" class="gallery-grid">
              <p class="empty-state">no gallery images yet.</p>
            </div>
          </div>
        </section>

        <!-- ORDERS Section -->
        <section id="orders" class="admin-section">
          <div class="section-header">
            <h2>orders management</h2>
          </div>

          <!-- Order Stats -->
          <div class="inventory-stats">
            <div class="stat-box">
              <div class="stat-label">total orders</div>
              <div class="stat-number" id="totalOrders">0</div>
            </div>
            <div class="stat-box">
              <div class="stat-label">pending</div>
              <div class="stat-number warning" id="pendingOrders">0</div>
            </div>
            <div class="stat-box">
              <div class="stat-label">completed</div>
              <div class="stat-number" id="completedOrders">0</div>
            </div>
            <div class="stat-box">
              <div class="stat-label">total revenue</div>
              <div class="stat-number" id="totalRevenue">$0</div>
            </div>
          </div>

          <!-- Order Filters -->
          <div class="filter-bar">
            <div class="filter-group">
              <label>status</label>
              <select id="orderStatus" class="filter-select" onchange="filterOrders()">
                <option value="">all status</option>
                <option value="pending">pending</option>
                <option value="processing">processing</option>
                <option value="completed">completed</option>
                <option value="cancelled">cancelled</option>
              </select>
            </div>
            <button class="btn btn-secondary" onclick="resetOrderFilters()">reset</button>
          </div>

          <!-- Orders Table -->
          <div class="items-list">
            <h3>order history</h3>
            <div id="ordersTable" class="inventory-table">
              <p class="empty-state">no orders yet</p>
            </div>
          </div>
        </section>
      </div>
    </main>
  </div>

  <!-- Modal for Edit/Delete -->
  <div id="itemModal" class="modal edit-modal">
    <div class="modal-content edit-modal-content">
      <div class="modal-header">
        <h3 id="modalTitle">Edit Item</h3>
        <button type="button" class="modal-close" onclick="closeModal()">
          <i class="ri-close-line"></i>
        </button>
      </div>

      <form id="modalForm" onsubmit="handleModalSubmit(event)" class="modal-form">
        <div class="modal-body">
          <div id="modalFormContent">
            <!-- Form content akan diisi dinamis -->
          </div>
        </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" onclick="closeModal()">
            <i class="ri-close-line"></i> Cancel
          </button>
          <button type="button" class="btn btn-danger" onclick="deleteItem()">
            <i class="ri-delete-bin-line"></i> Delete
          </button>
          <button type="submit" class="btn btn-success">
            <i class="ri-check-line"></i> Save
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal for Order Details -->
  <div id="orderModal" class="modal edit-modal">
    <div class="modal-content edit-modal-content">
      <div class="modal-header">
        <h3 id="orderModalTitle">Order Details</h3>
        <button type="button" class="modal-close" onclick="closeOrderModal()">
          <i class="ri-close-line"></i>
        </button>
      </div>

      <div class="modal-body">
        <div id="orderModalContent">
          <!-- Order details akan diisi dinamis -->
        </div>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" onclick="closeOrderModal()">
          <i class="ri-close-line"></i> Close
        </button>
        <button type="button" class="btn btn-primary" onclick="printInvoice()">
          <i class="ri-printer-line"></i> Print
        </button>
        <button type="button" class="btn btn-success" onclick="updateOrderStatus()">
          <i class="ri-check-line"></i> Update
        </button>
      </div>
    </div>
  </div>


  <!-- Firebase Scripts - Using Compat version (supports traditional script loading) -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
  <script src="../database.js"></script>
  <script src="../database-sync.js"></script>

  <!-- Admin Scripts -->
  <script src="admin.js"></script>
  <script src="firebase-admin-sync.js"></script>
  
  <!-- Payment, Email & Customer Account Scripts (Production) -->
  <script src="payment-integration.js"></script>
  <script src="email-notifications.js"></script>
</body>
</html>
